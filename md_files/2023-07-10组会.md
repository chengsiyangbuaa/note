
### 恶意代码分类实验结果
![](https://tallestdaisy.oss-cn-beijing.aliyuncs.com/20230710104927.png)
目前的恶意代码样本分类效果很差。推测原因：
1. 目前学到的函数嵌入表示并没有很好的对语义进行表示。恶意代码的样本架构均是x86，而微调和预训练的架构还包含mips，arm。
2. 样本不均匀，函数的分布不均匀。不同APT组织下的函数数量差异很大。
3. 样本中存在大量windows库函数，这些库函数可能影响了样本的分类。
4. 恶意代码样本大多数是运行在windows系统上的，而预训练和微调的数据集的样本文件格式均为elf也就是运行在linux上的二进制文件。运行的系统差异会影响汇编代码的库函数调用，可能会对语义表示产生影响


### 当前的解决方案
1. 重新创建数据集，之选用x86-32,x86-64架构的样本进行预训练和微调。
2. 继续收集apt恶意代码样本，争取让各个组织样本数量均匀。
3. 对恶意代码样本删除库函数，去除库函数对恶意代码分类的影响。



![](https://tallestdaisy.oss-cn-beijing.aliyuncs.com/20230710105135.png)
### 样本分析

#### 对于APT恶意代码样本的架构系统信息统计如下：
架构：
x86-32: 1314
x86-64: 79
cli-32: 3

系统：
OS: Windows, Count: 1372
OS: Unknown, Count: 7

### 问题

之前预训练和微调的数据集按照下面的这个论文中的数据集构建。
![](https://tallestdaisy.oss-cn-beijing.aliyuncs.com/20230710104544.png)

但是最终的任务————恶意代码APT归因任务的样本集中，样本基本只有x86-64,x86-32两种架构。